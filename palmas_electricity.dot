digraph G {
	rankdir=LR;
	splines=line;
	ratio=auto;
	compress=true;
	//overlap=scale;
	concentrate=false;
	node [shape=record];
	subgraph cluster_network {
		switch[label="{Ubiquiti EdgeSwitch PoE+ 24 (250w)|
			{<p1>p1|
			<p2>p2|
			<p3>p3|
			<p4>p4|
			<p5>p5|
			<p6>p6|
			<p7>p7|
			<p8>p8|
			<p9>p9|
			<p10>p10|
			<p11>p11|
			<p12>p12|
			<p13>p13|
			<p14>p14|
			<p15>p15|
			<p16>p16|
			<p17>p17|
			<p18>p18|
			<p19>p19|
			<p20>p20|
			<p21>p21|
			<p22>p22|
			<p23>p23|
			<p24>p24}}", 
			URL="https://eu.store.ui.com/collections/operator-edgemax-switches/products/edgeswitch-24-250w"];
		video[label= "{{<camera_1>camera_1|
			<camera_2>camera_2|
			<camera_3>camera_3|
			<camera_4>camera_4|
			<camera_5>camera_5|
			<zoneminder>network video recorder Lenovo Thinkpad X2*0}|
			video}"];
		wifi[label="{{
			<ap_1>Ubiquiti UniFi 6 Lite Access Point 1|
			<ap_2>Ubiquiti UniFi 6 Lite Access Point 2}|
			wifi}",
			URL="https://eu.store.ui.com/collections/unifi-network-access-points/products/unifi-ap-6-lite"];
		mobile_internet_uplink;
		kivspalvas_link[label= "{{<directional_antenna>Ubiquiti NanoStation M2}|
			Ķīvspalvas link}",
			URL="https://www.ui.com/downloads/datasheets/nanostationm/nsm_ds_web.pdf"];
		home_automation_server[label="home automation server Lenovo Thinkpad X2*0"];
		label= "ethernet network";
		style= filled;
		color = red;
	}
	subgraph cluster_breaker_box {
		ip32in_1[label="{{<lan>lan|<di1>di1|<di2>di2|<di3>di3|<di4>di4|<di5>di5|<di6>di6|<di7>di7|<di8>di8|<di9>di9|<di10>di10|<di11>di11|<di12>di12|<di13>di13|<di14>di14|<di15>di15|<di16>di16|<ai1>ai1|<ai2>ai2|<ai3>ai3|<ai4>ai4|<ai5>ai5|<ai6>ai6|<ai7>ai7|<ai8>ai8|<ti1>ti1|<ti2>ti2|<ti3>ti3|<ti4>ti4}|Denkovi smartDEN IP-32IN #1}",URL="http://denkovi.com/smartden-lan-ethernet-32-inputs-module-din-rail-box"];
		ip32in_2[label="{{<lan>lan|<di1>di1|<di2>di2|<di3>di3|<di4>di4|<di5>di5|<di6>di6|<di7>di7|<di8>di8|<di9>di9|<di10>di10|<di11>di11|<di12>di12|<di13>di13|<di14>di14|<di15>di15|<di16>di16|<ai1>ai1|<ai2>ai2|<ai3>ai3|<ai4>ai4|<ai5>ai5|<ai6>ai6|<ai7>ai7|<ai8>ai8|<ti1>ti1|<ti2>ti2|<ti3>ti3|<ti4>ti4}|Denkovi smartDEN IP-32IN #2}",URL="http://denkovi.com/smartden-lan-ethernet-32-inputs-module-din-rail-box"];
		kc868d8[label="{{<lan>lan|<rs485>rs485|<di1>di1|<di2>di2|<di3>di3|<di4>di4|<di5>di5|<di6>di6|<di7>di7|<di8>di8}|KinCony KC868-D8 dimmer switch|{<do1>do1|<do2>do2|<do3>do3|<do4>do4|<do5>do5|<do6>do6|<do7>do7|<do8>do8}}", URL="https://www.kincony.com/8-channel-dimmer.html"];
		ip16r[label="{{<lan>lan}|Denkovi SmartDEN IP-16R|{<r1>r1|<r2>r2|<r3>r3|<r4>r4|<r5>r5|<r6>r6|<r7>r7|<r8>r8|<r9>r9|<r10>r10|<r11>r11|<r12>r12|<r13>r13|<r14>r14|<r15>r15|<r16>r16}}",URL="http://denkovi.com/smartden-lan-ethernet-16-relay-module-din-rail-box"];
		/*maxi[label="{Denkovi SmartDEN Maxi|{<r1>r1|<r2>r2|<r3>r3|<r4>r4|<r5>r5|<r6>r6|<r7>r7|<r8>r8|<di1>di1|<di2>di2|<di3>di3|<di4>di4|<di5>di5|<di6>di6|<di7>di7|<di8>di8|<ai1>ai1|<ai2>ai2|<ai3>ai3|<ai4>ai4|<ti1>ti1|<ti2>ti2|<ti3>ti3|<ti4>ti4|<ao1>ao1|<ao2>ao2}}", URL="http://denkovi.com/smartden-maxi-io-relay-module-snmp-http-din-rail-box"];
		*/
		label = "core home automation devices";
		URL="";
		style = filled;
		color = lightblue;
	}

// Input
	smoke_sensors[label= "{smoke sensors|
		{<1>ground floor smoke sensor|
		<2>first floor smoke sensor}
	}",color = brown;];

	humidity_sensors[label="{humidity sensors|
		{<1>straw wall humidity sensor 1|
		<2>straw wall humidity sensor 2}
	}",color = brown;];

	temperature_sensors[label= "{temperature sensors|
		{<bathroom>bathroom temperature sensor|
		<kitchen>kitchen temperature sensor|
		<living>living room temperature sensor|
		<tech_room>tech room temperature sensor|
		<toilet>toilet temperature sensor}
	}",color = brown;];

	window_sensors[label= "{window sensors|
		{<ground_floor_bedroom_north>ground floor bedroom north window sensor|
		<ground_floor_bedroom_west>ground floor bedroom west window sensor|
		<ground_floor_living_room_west>ground floor living room west window sensor|
		<ground_floor_living_room_southwest>ground floor living room southwest window sensor|
		<ground_floor_living_room_south_middle>ground floor living room south middle window sensor|
		<ground_floor_living_room_southeast>ground floor living room southeast window sensor|
		<ground_floor_living_room_east>ground floor living room east window sensor|
		<ground_floor_door>ground floor door sensor|
		<ground_floor_kitchen>ground floor kitchen window sensor}
	}",color = brown;];
	
	dimmer_switches[label= "{dimmer switches|
		{<living_room_light_1_1>living room light 1 dimmer switch 1|
		<living_room_light_1_2>living room light 1 dimmer 2|
		<living_room_light_2_1>living room light 2 dimmer switch 1|
		<living_room_light_2_2>living room light 2 dimmer 2|
		<living_room_light_3_1>living room light 3 dimmer switch 1|
		<living_room_light_3_2>living room light 3 dimmer 2|
		<bathroom>bathroom dimmer switch}
	}"];
	push_button_switches[label= "{push button switches|
		{<bathroom_heating>bathroom heating switch|
		<bedroom_heating>bedroom heating switch|
		<kitchen_heating_1>kitchen heating switch 1|
		<kitchen_heating_2>kitchen heating switch 2|
		<living_room_1_heating_1>living room heating 1 switch 1|
		<living_room_1_heating_2>living room heating 2 switch 1|
		<living_room_1_heating_3>living room heating 3 switch 1|
		<living_room_2_heating_1>living room heating 1 switch 2|
		<living_room_2_heating_2>living room heating 2 switch 2|
		<living_room_2_heating_3>living room heating 3 switch 2|
		<bedroom_lighting>bedroom light switch|
		<kitchen_lighting>kitchen light switch|
		<tech_room_lighting>tech room light switch|
		<toilet_lighting>toilet light switch}}
	}"];

// Output

	heating[label= "{{<bathroom>bathroom|
		<bedroom>bedroom|
		<kitchen_1>kitchen 1|
		<kitchen_2>kitchen 2|
		<living_room_1>living room 1|
		<living_room_2>living room 2|
		<living_room_3>living room 3|
		<technical_room>technical room|
		<toilet>toilet}|
		{heating}	
	}", color = green;];

	lighting_classic[label= "{{
		<bedroom>bedroom|
		<hall>hall|
		<kitchen>kitchen|
		<technical_room>technical room|
		<toilet>toilet}|
		{classic lighting}
	}", color = yellow;];

	lighting_dimmable[label= "{{
		<dimmer_driver_living_room_light_1>dimmer driver living room light 1|
		<dimmer_driver_living_room_light_2>dimmer driver living room light 2|
		<dimmer_driver_living_room_light_3>dimmer driver living room light 3|
		<dimmer_driver_bathroom_light>dimmer driver bathroom light}|
		{dimmable lighting}
	}", color = yellow;];


/*============================================================================================================
Connections
==============================================================================================================

LAN connections
------------------------------------------------------------------------------------------------------------*/
	switch:p1 -> mobile_internet_uplink [dir=both, label="PoE"];
	switch:p2 -> kivspalvas_link [dir=both, label="PoE", style=dashed];
	switch:p3 -> wifi:ap_1 [dir=both, label="PoE"];
	switch:p4 -> wifi:ap_2 [dir=both, label="PoE", style=dashed];
	switch:p5 -> video:camera_1 [dir=both, label="PoE"];
	switch:p6 -> video:camera_2  [dir=both, label="PoE"];
	switch:p7 -> video:camera_3 [dir=both, label="PoE"];
	switch:p8 -> video:camera_4 [dir=both, label="PoE"];
	switch:p9 -> video:camera_5 [dir=both, label="PoE"];
	switch:p10 -> video:zoneminder [dir=both];
	switch:p20 -> home_automation_server [dir=both];
	switch:p21 -> ip32in_1:lan [dir=both];
	switch:p22 -> ip32in_2:lan [dir=both];
	switch:p23 -> kc868d8:lan [dir=both];
	switch:p24 -> ip16r:lan [dir=both];

/*----------------------------------------------------------------------------------------------------------
 Input connections
------------------------------------------------------------------------------------------------------------*/
	// Dimmer input connections
	dimmer_switches:living_room_light_1_1 -> kc868d8:di1;
	dimmer_switches:living_room_light_2_1 -> kc868d8:di2;
	dimmer_switches:living_room_light_3_1 -> kc868d8:di3;
	dimmer_switches:bathroom -> kc868d8:di4;

	// Push button switch connections
	push_button_switches:bathroom_heating -> ip32in_1:di1;
	push_button_switches:bedroom_heating -> ip32in_1:di2;
	push_button_switches:kitchen_heating_1 -> ip32in_1:di3;
	push_button_switches:kitchen_heating_2 -> ip32in_1:di4;
	push_button_switches:living_room_1_heating_1 -> ip32in_1:di5;
	push_button_switches:living_room_1_heating_2 -> ip32in_1:di6;
	push_button_switches:living_room_1_heating_3 -> ip32in_1:di7;
	push_button_switches:living_room_2_heating_1 -> ip32in_1:di8;
	push_button_switches:living_room_2_heating_2 -> ip32in_1:di9;
	push_button_switches:living_room_2_heating_3 -> ip32in_1:di10;
	push_button_switches:bedroom_lighting -> ip32in_1:di11;
	push_button_switches:kitchen_lighting -> ip32in_1:di12;
	push_button_switches:tech_room_lighting -> ip32in_1:di13;
	push_button_switches:toilet_lighting -> ip32in_1:di14;

	//Straw bale wall humidity sensors
	humidity_sensors:1 -> ip32in_2:ai1;
	humidity_sensors:2 -> ip32in_2:ai2;

	// Smoke sensors
	smoke_sensors:1 -> ip32in_2:di10;
	smoke_sensors:2 -> ip32in_2:di11;

	// Temperature sensor input connections
	temperature_sensors:bathroom -> ip32in_2:ti1;
	temperature_sensors:kitchen -> ip32in_2:ti2;
	temperature_sensors:living -> ip32in_2:ti3;
	temperature_sensors:tech_room -> ip32in_2:ti4;
	temperature_sensors:toilet -> ip32in_1:ti1;

	// Window sensor input connections
	window_sensors:ground_floor_bedroom_north -> ip32in_2:di1;
	window_sensors:ground_floor_bedroom_west -> ip32in_2:di2;
	window_sensors:ground_floor_living_room_west -> ip32in_2:di3;
	window_sensors:ground_floor_living_room_southwest -> ip32in_2:di4;
	window_sensors:ground_floor_living_room_south_middle -> ip32in_2:di5;
	window_sensors:ground_floor_living_room_southeast -> ip32in_2:di6;
	window_sensors:ground_floor_living_room_east -> ip32in_2:di7;
	window_sensors:ground_floor_door -> ip32in_2:di8;
	window_sensors:ground_floor_kitchen -> ip32in_2:di9;

	// Unused  input connections
	ip32in_1:ai3;
	ip32in_1:ai2;

/*------------------------------------------------------------------------------------------------------------
Output connections
------------------------------------------------------------------------------------------------------------*/
	
	// Dimmer output connections
	kc868d8:do1 -> lighting_dimmable:dimmer_driver_living_room_light_1;
	kc868d8:do2 -> lighting_dimmable:dimmer_driver_living_room_light_2;
	kc868d8:do3 -> lighting_dimmable:dimmer_driver_living_room_light_3;
	kc868d8:do4 -> lighting_dimmable:dimmer_driver_bathroom_light;

	// Relay output connections
	ip16r:r1 -> heating:bathroom;
	ip16r:r2 -> heating:bedroom;
	ip16r:r3 -> heating:kitchen_1;
	ip16r:r4 -> heating:kitchen_2;
	ip16r:r5 -> heating:living_room_1;
	ip16r:r6 -> heating:living_room_2;
	ip16r:r7 -> heating:living_room_3;
	ip16r:r8 -> heating:technical_room;
	ip16r:r9 -> heating:toilet;
	ip16r:r10 -> lighting_classic:bedroom;
	ip16r:r11 -> lighting_classic:hall;
	ip16r:r12 -> lighting_classic:kitchen;
	ip16r:r13 -> lighting_classic:technical_room;
	ip16r:r14 -> lighting_classic:toilet;
}
